<!DOCTYPE html>
<html>
  <head>
    <title> Source </title>
    <link rel="stylesheet" href="../style/source.css">
  </head>
  <body>
    <span id="index-frontend" class="sourcespan">
        <h3>index-frontend.js</h3>
        <span class="code">
        document.addEventListener("DOMContentLoaded", function(event){
            require("../scripts/math.js");
            require("../scripts/onclick.js");
            require("../scripts/vars.js");
            require("../scripts/showResult.js");
           });
         
           function require(script) {
             $.ajax({
                 url: script,
                 dataType: "script",
                 async: false,           
                 success: function () {
                     // all good...
                 },
                 error: function () {
                     throw new Error("Could not load script " + script);
                 }
             });
         }
        </span>
    </span>
    <span id="math" class="sourcespan">
        <h3>math.js</h3>
        <span class="code">
            function math(op){
                setVariables();
                $.ajax({
                        url:"https://derandy-php.herokuapp.com/"+op+".php",    //the page containing php script
                        type: "post",    //request type,
                        dataType: 'json',
                        data: {x: xval, y: yval},
                        success:function(result){
                            showResult(result);
                        },
                        error:function(){
                            showResult("ERROR");
                        }
                    });
            }
        </span>
    </span>

    <span id="onclick" class="sourcespan">
        <h3>onclick.js</h3>
        <span class="code">
            document.getElementById("add").onclick=function(){math("add")};
            document.getElementById("multiply").onclick=function(){math("multiply")};
            document.getElementById("sub1").onclick=function(){math("subtract1")};
            document.getElementById("sub2").onclick=function(){math("subtract2")};
            document.getElementById("div1").onclick=function(){math("divide1")};
            document.getElementById("div2").onclick=function(){math("divide2")};
        </span>
    </span>

    <span id="showResult" class="sourcespan">
        <h3>showResult.js</h3>
        <span class="code">
            function showResult(result){
                document.getElementById("ergebnisline").innerHTML = result;
                document.getElementById("x").value = 0;
                document.getElementById("y").value = 0;
            } 
        </span>
    </span>

  </body>
</html>